
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.darkmode.dev/documentation/kubernetes/kubernetes-networking/">
      
      <link rel="icon" href="../../../assets/logo.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.7">
    
    
      
        <title>Kubernetes Networking - DevOps Notes</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.9d5733d3.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.e6a45f82.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#understanding-kubernetes-network-backends" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="DevOps Notes" class="md-header__button md-logo" aria-label="DevOps Notes" data-md-component="logo">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DevOps Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Kubernetes Networking
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/depgod/depgod.github.io/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link md-tabs__link--active">
        Documentation
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../about/" class="md-tabs__link">
      About
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../contact/" class="md-tabs__link">
      Contact
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="DevOps Notes" class="md-nav__button md-logo" aria-label="DevOps Notes" data-md-component="logo">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    DevOps Notes
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/depgod/depgod.github.io/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Documentation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Documentation" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Documentation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Documentation Contents
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contents/" class="md-nav__link">
        Contents
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../markdown_basics/" class="md-nav__link">
        Markdown Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../versioning/" class="md-nav__link">
        Versioning Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_5" type="checkbox" id="__nav_1_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_5">
          CI/CD
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="CI/CD" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_5">
          <span class="md-nav__icon md-icon"></span>
          CI/CD
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cicd/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cicd/github-actions-sonarqube-docker/" class="md-nav__link">
        GitHub Actions with SonarQube & Harbor
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_6" type="checkbox" id="__nav_1_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_6">
          Infrastructure
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Infrastructure" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_6">
          <span class="md-nav__icon md-icon"></span>
          Infrastructure
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/ansible-guide/" class="md-nav__link">
        Ansible Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_7" type="checkbox" id="__nav_1_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1_7">
          Kubernetes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Kubernetes" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_7">
          <span class="md-nav__icon md-icon"></span>
          Kubernetes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../multipass-k8s-cluster/" class="md-nav__link">
        Multipass Local Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../k3s-ha-cluster/" class="md-nav__link">
        HA K3s Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../argocd-setup/" class="md-nav__link">
        ArgoCD Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kubectl-cheat-sheet/" class="md-nav__link">
        Kubectl Cheat Sheet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../k9s-guide/" class="md-nav__link">
        K9s CLI Guide
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Kubernetes Networking
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Kubernetes Networking
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#network-backend-basics" class="md-nav__link">
    Network Backend Basics
  </a>
  
    <nav class="md-nav" aria-label="Network Backend Basics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-cni" class="md-nav__link">
    What is CNI?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-network-backends" class="md-nav__link">
    Common Network Backends
  </a>
  
    <nav class="md-nav" aria-label="Common Network Backends">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-flannel-the-simple-solution" class="md-nav__link">
    1. Flannel: The Simple Solution
  </a>
  
    <nav class="md-nav" aria-label="1. Flannel: The Simple Solution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    Key Features
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-to-use-flannel" class="md-nav__link">
    When to Use Flannel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-not-to-use" class="md-nav__link">
    When Not to Use
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-calico-the-production-standard" class="md-nav__link">
    2. Calico: The Production Standard
  </a>
  
    <nav class="md-nav" aria-label="2. Calico: The Production Standard">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-features_1" class="md-nav__link">
    Key Features
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation_1" class="md-nav__link">
    Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-to-use-calico" class="md-nav__link">
    When to Use Calico
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-not-to-use_1" class="md-nav__link">
    When Not to Use
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-cilium-the-modern-choice" class="md-nav__link">
    3. Cilium: The Modern Choice
  </a>
  
    <nav class="md-nav" aria-label="3. Cilium: The Modern Choice">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-features_2" class="md-nav__link">
    Key Features
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation_2" class="md-nav__link">
    Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-to-use-cilium" class="md-nav__link">
    When to Use Cilium
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-not-to-use_2" class="md-nav__link">
    When Not to Use
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#choosing-the-right-backend" class="md-nav__link">
    Choosing the Right Backend
  </a>
  
    <nav class="md-nav" aria-label="Choosing the Right Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#decision-matrix" class="md-nav__link">
    Decision Matrix
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-scenarios" class="md-nav__link">
    Common Scenarios
  </a>
  
    <nav class="md-nav" aria-label="Common Scenarios">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-development-environment" class="md-nav__link">
    1. Development Environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-production-microservices" class="md-nav__link">
    2. Production Microservices
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-enterprise-cluster" class="md-nav__link">
    3. Enterprise Cluster
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#network-policy-examples" class="md-nav__link">
    Network Policy Examples
  </a>
  
    <nav class="md-nav" aria-label="Network Policy Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-policy-with-calico" class="md-nav__link">
    Basic Policy with Calico
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application-layer-policy-with-cilium" class="md-nav__link">
    Application-Layer Policy with Cilium
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting-tips" class="md-nav__link">
    Troubleshooting Tips
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting Tips">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-pod-communication-issues" class="md-nav__link">
    1. Pod Communication Issues
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-network-policy-problems" class="md-nav__link">
    2. Network Policy Problems
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-performance-issues" class="md-nav__link">
    3. Performance Issues
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    Best Practices
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-general-guidelines" class="md-nav__link">
    1. General Guidelines
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-production-setup" class="md-nav__link">
    2. Production Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-resource-planning" class="md-nav__link">
    3. Resource Planning
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    Additional Resources
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_8" type="checkbox" id="__nav_1_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_8">
          Self-Hosting
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Self-Hosting" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_8">
          <span class="md-nav__icon md-icon"></span>
          Self-Hosting
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../selfhosting/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../selfhosting/why-selfhost/" class="md-nav__link">
        Why Self-Host?
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/" class="md-nav__link">
        Linux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/" class="md-nav__link">
        Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../miscellaneous/" class="md-nav__link">
        Miscellaneous
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../contact/" class="md-nav__link">
        Contact
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/depgod/depgod.github.io/edit/main/docs/documentation/kubernetes/kubernetes-networking.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>



<h1 id="understanding-kubernetes-network-backends">Understanding Kubernetes Network Backends</h1>
<h2 id="introduction">Introduction</h2>
<p>Kubernetes networking can be complex, but choosing the right network backend (CNI plugin) is crucial for your cluster's success. This guide helps you understand common networking backends and when to use them.</p>
<h2 id="network-backend-basics">Network Backend Basics</h2>
<pre class="mermaid"><code>graph TD
    A[Kubernetes Cluster] --&gt; B[Network Backend/CNI]
    B --&gt; C[Pod-to-Pod Communication]
    B --&gt; D[Network Policies]
    B --&gt; E[Service Networking]
    style B fill:#f96,stroke:#333</code></pre>
<h3 id="what-is-cni">What is CNI?</h3>
<p>Container Network Interface (CNI) is a standard that defines how container networking should be configured. Network backends implement this standard to provide:</p>
<ul>
<li>Pod-to-pod communication</li>
<li>Network policy enforcement</li>
<li>Service networking</li>
<li>External access</li>
</ul>
<h2 id="common-network-backends">Common Network Backends</h2>
<h3 id="1-flannel-the-simple-solution">1. Flannel: The Simple Solution</h3>
<div class="admonition tip">
<p class="admonition-title">Best For</p>
<ul>
<li>Development environments</li>
<li>Small clusters</li>
<li>Learning Kubernetes</li>
<li>Simple requirements</li>
</ul>
</div>
<h4 id="key-features">Key Features</h4>
<ul>
<li>Easy to set up</li>
<li>Minimal configuration</li>
<li>Low overhead</li>
<li>Layer 3 networking</li>
</ul>
<h4 id="installation">Installation</h4>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>https://raw.githubusercontent.com/flannel-io/flannel/master/Documentation/kube-flannel.yml
</code></pre></div>
<h4 id="when-to-use-flannel">When to Use Flannel</h4>
<ul>
<li>You're new to Kubernetes</li>
<li>You need a simple development environment</li>
<li>Your cluster has basic networking needs</li>
<li>You want minimal configuration overhead</li>
</ul>
<h4 id="when-not-to-use">When Not to Use</h4>
<ul>
<li>You need network policies</li>
<li>You require advanced security features</li>
<li>You have performance-critical applications</li>
<li>You need cross-cluster networking</li>
</ul>
<h3 id="2-calico-the-production-standard">2. Calico: The Production Standard</h3>
<div class="admonition tip">
<p class="admonition-title">Best For</p>
<ul>
<li>Production environments</li>
<li>Security-focused deployments</li>
<li>Large clusters</li>
<li>Multi-tenant environments</li>
</ul>
</div>
<h4 id="key-features_1">Key Features</h4>
<ul>
<li>Network policy support</li>
<li>BGP routing</li>
<li>Performance optimized</li>
<li>Security controls</li>
</ul>
<h4 id="installation_1">Installation</h4>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>https://docs.projectcalico.org/manifests/calico.yaml
</code></pre></div>
<h4 id="when-to-use-calico">When to Use Calico</h4>
<ul>
<li>You need network policy enforcement</li>
<li>You want BGP routing capabilities</li>
<li>You have a large-scale deployment</li>
<li>You require performance monitoring</li>
</ul>
<h4 id="when-not-to-use_1">When Not to Use</h4>
<ul>
<li>You need a simple setup for development</li>
<li>You have limited resources</li>
<li>You don't need advanced networking features</li>
</ul>
<h3 id="3-cilium-the-modern-choice">3. Cilium: The Modern Choice</h3>
<div class="admonition tip">
<p class="admonition-title">Best For</p>
<ul>
<li>Microservices architectures</li>
<li>High-performance requirements</li>
<li>Security-critical applications</li>
<li>Observability needs</li>
</ul>
</div>
<h4 id="key-features_2">Key Features</h4>
<ul>
<li>eBPF-based networking</li>
<li>Application-aware policies</li>
<li>Advanced observability</li>
<li>Load balancing</li>
</ul>
<h4 id="installation_2">Installation</h4>
<div class="highlight"><pre><span></span><code>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>cilium<span class="w"> </span>https://helm.cilium.io/
helm<span class="w"> </span>install<span class="w"> </span>cilium<span class="w"> </span>cilium/cilium<span class="w"> </span>--namespace<span class="w"> </span>kube-system
</code></pre></div>
<h4 id="when-to-use-cilium">When to Use Cilium</h4>
<ul>
<li>You need application-layer visibility</li>
<li>You want modern security features</li>
<li>You require high performance</li>
<li>You need detailed networking metrics</li>
</ul>
<h4 id="when-not-to-use_2">When Not to Use</h4>
<ul>
<li>You have older kernel versions (&lt;4.9)</li>
<li>You need a simple networking solution</li>
<li>You have limited system resources</li>
</ul>
<h2 id="choosing-the-right-backend">Choosing the Right Backend</h2>
<h3 id="decision-matrix">Decision Matrix</h3>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Flannel</th>
<th>Calico</th>
<th>Cilium</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ease of Setup</td>
<td>★★★★★</td>
<td>★★★</td>
<td>★★</td>
</tr>
<tr>
<td>Performance</td>
<td>★★★</td>
<td>★★★★</td>
<td>★★★★★</td>
</tr>
<tr>
<td>Security Features</td>
<td>★</td>
<td>★★★★</td>
<td>★★★★★</td>
</tr>
<tr>
<td>Resource Usage</td>
<td>★★★★★</td>
<td>★★★</td>
<td>★★</td>
</tr>
<tr>
<td>Enterprise Support</td>
<td>★</td>
<td>★★★★★</td>
<td>★★★★</td>
</tr>
<tr>
<td>Learning Curve</td>
<td>★★★★★</td>
<td>★★★</td>
<td>★★</td>
</tr>
</tbody>
</table>
<h3 id="common-scenarios">Common Scenarios</h3>
<h4 id="1-development-environment">1. Development Environment</h4>
<div class="highlight"><pre><span></span><code><span class="nt">Recommendation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Flannel</span>
<span class="nt">Reasons</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Simple setup</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Minimal resources</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Quick start</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sufficient for development</span>
</code></pre></div>
<h4 id="2-production-microservices">2. Production Microservices</h4>
<div class="highlight"><pre><span></span><code><span class="nt">Recommendation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Cilium</span>
<span class="nt">Reasons</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application-aware policies</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">High performance</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Advanced observability</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Modern security features</span>
</code></pre></div>
<h4 id="3-enterprise-cluster">3. Enterprise Cluster</h4>
<div class="highlight"><pre><span></span><code><span class="nt">Recommendation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Calico</span>
<span class="nt">Reasons</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Proven track record</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Enterprise support</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Network policies</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BGP routing</span>
</code></pre></div>
<h2 id="network-policy-examples">Network Policy Examples</h2>
<h3 id="basic-policy-with-calico">Basic Policy with Calico</h3>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NetworkPolicy</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">allow-frontend</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">podSelector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="w">  </span><span class="nt">ingress</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">from</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">podSelector</span><span class="p">:</span>
<span class="w">        </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">          </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">frontend</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</code></pre></div>
<h3 id="application-layer-policy-with-cilium">Application-Layer Policy with Cilium</h3>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cilium.io/v2</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CiliumNetworkPolicy</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http-policy</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">endpointSelector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api</span>
<span class="w">  </span><span class="nt">ingress</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">fromEndpoints</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">frontend</span>
<span class="w">    </span><span class="nt">toPorts</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;80&quot;</span>
<span class="w">        </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">      </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">        </span><span class="nt">http</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GET</span>
<span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/api/v1&quot;</span>
</code></pre></div>
<h2 id="troubleshooting-tips">Troubleshooting Tips</h2>
<h3 id="1-pod-communication-issues">1. Pod Communication Issues</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Test pod connectivity</span>
kubectl<span class="w"> </span>run<span class="w"> </span>test-pod<span class="w"> </span>--image<span class="o">=</span>busybox<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span>--<span class="w"> </span>ping<span class="w"> </span>&lt;target-pod-ip&gt;

<span class="c1"># Check CNI configuration</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>cni
</code></pre></div>
<h3 id="2-network-policy-problems">2. Network Policy Problems</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Verify policy</span>
kubectl<span class="w"> </span>describe<span class="w"> </span>networkpolicy<span class="w"> </span>&lt;policy-name&gt;

<span class="c1"># Check CNI logs</span>
kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span>-l<span class="w"> </span>k8s-app<span class="o">=</span>calico-node<span class="w">  </span><span class="c1"># For Calico</span>
kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span>-l<span class="w"> </span>k8s-app<span class="o">=</span>cilium<span class="w">  </span><span class="c1"># For Cilium</span>
</code></pre></div>
<h3 id="3-performance-issues">3. Performance Issues</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Check CNI pod status</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span>-o<span class="w"> </span>wide<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>cni

<span class="c1"># View metrics (Cilium)</span>
cilium<span class="w"> </span>status
</code></pre></div>
<h2 id="best-practices">Best Practices</h2>
<h3 id="1-general-guidelines">1. General Guidelines</h3>
<ul>
<li>Start with Flannel for learning</li>
<li>Use Calico for standard production workloads</li>
<li>Choose Cilium for modern microservices</li>
</ul>
<h3 id="2-production-setup">2. Production Setup</h3>
<ul>
<li>Always enable network policies</li>
<li>Monitor CNI pod health</li>
<li>Keep CNI version updated</li>
<li>Document your network architecture</li>
</ul>
<h3 id="3-resource-planning">3. Resource Planning</h3>
<ul>
<li>Consider node resources</li>
<li>Plan IP address ranges</li>
<li>Account for future growth</li>
<li>Monitor network performance</li>
</ul>
<h2 id="additional-resources">Additional Resources</h2>
<ul>
<li><a href="https://github.com/containernetworking/cni">CNI Specification</a></li>
<li><a href="https://github.com/flannel-io/flannel">Flannel Documentation</a></li>
<li><a href="https://docs.projectcalico.org/">Calico Documentation</a></li>
<li><a href="https://docs.cilium.io/">Cilium Documentation</a></li>
</ul>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../k9s-guide/" class="md-footer__link md-footer__link--prev" aria-label="Previous: K9s CLI Guide" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              K9s CLI Guide
            </div>
          </div>
        </a>
      
      
        
        <a href="../../selfhosting/" class="md-footer__link md-footer__link--next" aria-label="Next: Overview" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Overview
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.sections", "navigation.top", "navigation.tabs", "navigation.tabs.sticky", "toc.integrate", "content.code.copy"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.5e67fbfe.min.js"}</script>
    
    
      <script src="../../../assets/javascripts/bundle.e87a5f81.min.js"></script>
      
    
  </body>
</html>